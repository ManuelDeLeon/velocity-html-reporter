<body>
{{> velocity}}
</body>

<template name="velocity">

    <div id="velocityOverlay" style="display: {{overlayIsVisible}};">
        <h3>Aggregate Reports
            <a class="display-toggle" data-target="velocityAggregateReports"
               href="javascript:void(0);">(show/hide)</a></h3>
        {{> velocityAggregateReports}}
        <h3>Test Reports
            <a class="display-toggle" data-target="velocityTestReports"
               href="javascript:void(0);">(show/hide)</a></h3>
        {{> velocityTestReports}}
        <h3>Logs
            <a class="display-toggle" data-target="velocityLogs"
               href="javascript:void(0);">(show/hide)</a></h3>
        {{> velocityLogs}}
        <h3>Test Files
            <a class="display-toggle" data-target="velocityTestFiles"
               href="javascript:void(0);">(show/hide)</a></h3>
        {{> velocityTestFiles}}
    </div>

    <a id="velocity-status-widget"
       class="{{statusWidgetClass}} display-toggle"
       data-target="velocityOverlay"
       href="javascript:void(0);"></a>

</template>

<template name="velocityAggregateReports">
    <table id="velocityAggregateReports"
           class="table"
           style="display: {{isVisible}};">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Result</th>
            </tr>
        </thead>
        <tbody>
            {{#each aggregateReports}}
            {{> velocityAggregateReport}}
            {{/each}}
        </tbody>
    </table>
</template>

<template name="velocityAggregateReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{result}}</td>
    </tr>
</template>

<template name="velocityTestReports">
    <table id="velocityTestReports"
           class="table"
           style="display: {{isVisible}};">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Framework</th>
                <th>Result</th>
                <th>Ancestors</th>
                <th>Timestamp</th>
                <th>Time</th>
                <th>Async</th>
                <th>TimeOut</th>
                <th>Pending</th>
                <th>FailureType</th>
                <th>FailureMessage</th>
            </tr>
        </thead>
        <tbody>
            {{#each testReports}}
            {{> velocityTestReport}}
            {{/each}}
        </tbody>
    </table>
</template>

<template name="velocityTestReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{framework}}</td>
        <td>{{result}}</td>
        <td>{{ancestors}}</td>
        <td>{{timestamp}}</td>
        <td>{{time}}</td>
        <td>{{async}}</td>
        <td>{{timeOut}}</td>
        <td>{{pending}}</td>
        <td>{{failureType}}</td>
        <td>{{failureMessage}}</td>
    </tr>
</template>

<template name="velocityLogs">
    <table id="velocityLogs" class="table" style="display: {{isVisible}};">
        <thead>
            <tr>
                <th>Timestamp</th>
                <th>Type</th>
                <th>Message</th>
                <th>Framework</th>
            </tr>
        </thead>
        <tbody>
            {{#each logs}}
            {{> velocityLog}}
            {{/each}}
        </tbody>
    </table>
</template>

<template name="velocityLog">
    <tr class="{{result}}">
        <td>{{timestamp}}</td>
        <td>{{type}}</td>
        <td>{{message}}</td>
        <td>{{framework}}</td>
    </tr>
</template>

<template name="velocityTestFiles">
    <table id="velocityTestFiles"
           class="table"
           style="display: {{isVisible}};">
        <thead>
            <tr>
                <th>ID</th>
                <th>Relative Path</th>
                <th>Target Framework</th>
                <th>Last Modified</th>
            </tr>
        </thead>
        <tbody>
            {{#each testFiles}}
            {{> velocityTestFile}}
            {{/each}}
        </tbody>
    </table>
</template>

<template name="velocityTestFile">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{relativePath}}</td>
        <td>{{targetFramework}}</td>
        <td>{{lastModified}}</td>
    </tr>
</template>